<%= render 'shared/flash' %>

<div class ="container m-5">
  <div class ="row my-4">
    <h3>レシピ登録</h3>
  </div>
  <%= form_with model: @recipe, url: recipes_path, method: :post do |f| %>
  <!--%= f.hidden_field :image_cache %-->
    <section class ="form row">
      <div class ="col-5">
        <h4 class ="recipe-form">写真
          <%= f.label :image, :movie do %>
            <i class="fas fa-camera"></i>
            <%= f.file_field :image, style: 'display:none;' %>
            <%= f.file_field :movie, style: 'display:none;' %>
          <% end %>
        </h4>
        <div class="photo-area">
          <%= image_tag "no_image"%>
        </div>
      </div>
      <div class ="col-6">
        <div class ="form-group row">
          <%= f.label :"料理名", class:"col-4" %>
          <%= f.text_field :cuisine_name, class:"form-control col-6 border-top-0 border-left-0 border-right-0 border-warning"%>
        </div>
        <div class ="form-group row">
          <%= f.label :"出来上がり量", class:"col-4"  %>
          <%= f.text_field :quantity, placeholder:"人前", class:"quantity form-control col-6 border-top-0 border-left-0 border-right-0 border-warning" %>
        </div>
  <!--材料入力フォーム・部分テンプ-->
        <div class ="form-group row">
          <div class ="col-4">材料</div>
        </div>
        <section class ="ingredient">
          <%= f.fields_for :ingredients do |ingredient| %>
            <%= render "ingredient_fields", f: ingredient %>
          <% end %>
          <%= link_to_add_fields "材料の追加", f, :ingredients%>
        </section>

  <!--作り方入力フォーム・部分テンプ-->
        <div  class ="form-group row">
          <div class ="col-4">作り方</div>
        </div>
        <section class ="step">
          <div class ="field">
            <%= f.fields_for :steps do |step| %>
              <%= render "step_fields", f: step %>
            <% end %>
            <%= link_to_add_fields "作り方の追加", f, :steps %>
          </div>
        </section>

        <div class ="form-group row">
          <%= f.label :"ジャンル", class:"col-4" %>
          <%= f.collection_select :genre_id, @genres, :id, :name, prompt: "選択してください", class:"form-control col-6" %>
        </div>
        <div class ="action row my-5">
          <%= f.hidden_field :material_count, value: '' %>
          <%= f.submit "登録する", class:"offset-4 col-sm-4 btn btn-lg btn-success" %>
        </div>
      </div>
    </section>
  <% end %>
</div>

rails db:migrate:down VERSION=